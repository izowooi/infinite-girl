# 배치 조합 가이드 — 무한 소녀 🌸

## 개요

Claude에게 자연어로 단어 조합을 지시하면, Claude가 직접 Supabase DB에서 단어를 읽고,
창의적인 조합 결과를 생성해서 저장합니다. 스크립트나 외부 API 없이 순수하게 동작합니다.

---

## 왜 한 번에 다 못 하나?

Claude는 한 세션에서 처리할 수 있는 도구 호출(MCP) 횟수에 한계가 있습니다.

| 단어 수 | 가능한 쌍 수 | 세션당 15개씩 필요 세션 수 |
|---------|------------|------------------------|
| 18개    | 171쌍      | 약 12세션               |
| 50개    | 1,275쌍    | 약 85세션               |
| 100개   | 5,050쌍    | 약 337세션              |
| 200개   | 20,100쌍   | 약 1,340세션 ← 현실 불가 |

> **쌍 계산 공식**: N×(N+1)/2
> (A+B = B+A이므로 중복 제거. A+A 자기 자신 조합도 포함)

**1라운드(1~18번)**까지는 충분히 가능합니다. 2라운드(신규 단어 포함 전체)부터는 흥미로운 쌍만 선별해서 요청하세요.

---

## 세션마다 할 말 (복사해서 사용)

### 진행 상황 확인
```
1번~18번 조합이 얼마나 남았어?
```

### 조합 요청 (매 세션)
```
1번~18번 중 아직 안 된 것 15개 조합해줘
```

### 특정 단어들만 조합 (선택적)
```
"불"과 관련된 아직 안 된 조합 10개 해줘
```

---

## Claude가 세션에서 하는 일

1. `combinations` 테이블 조회 → 아직 안 된 쌍 확인
2. 각 쌍에 대해 Claude 스스로 자연스러운 한국어 조합 이름 + 이모지 생성
3. `words` 테이블에 새 단어 저장 (이미 있으면 재사용)
4. `combinations` 테이블에 결과 저장
5. 진행 상황 요약 보고

---

## 진행 기록

진행 상황은 `docs/batch-combine-progress.md` 파일에 매 세션 후 업데이트됩니다.
다음 세션 시작 전에 이 파일을 확인하세요.

---

## 2라운드 이후 전략

1라운드(1~18번 기본 단어) 조합이 완료되면 단어 수가 크게 늘어납니다.
그 이후로는 **전체 조합 대신 테마별 선택**을 권장합니다.

예:
```
"불"이 들어간 단어와 "물"이 들어간 단어끼리 조합해줘
```
```
아직 한 번도 조합에 안 쓰인 단어들을 5개씩 짝지어 조합해줘
```
